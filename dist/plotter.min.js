!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Plotter=t():e.Plotter=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports.Point=n(1),e.exports.Line=n(2),e.exports.Plot=n(3),e.exports.Plotter=n(4)},function(e,t){function n(e,t){this.x=e,this.y=t}e.exports=n},function(e,t){function n(e,t,n,o){this.a=e,this.b=t,this.point=o,this.slope=n}e.exports=n},function(e,t,n){n(1)},function(e,t,n){function o(){function e(e,t){var n=t.settings,o=(e.x-f.offsetLeft-n.offset.x)/n.pixelPerUnit.x+n.domain.x,r=(f.height-(e.y-f.offsetTop)-(f.height-(n.offset.y+n.plotSize.y)))/n.pixelPerUnit.y+n.range.x;return new i(o,r)}function t(e,t){var n=t.settings;return e.x>=n.domain.x&&e.x<=n.domain.y&&e.y>=n.range.x&&e.y<=n.range.y}function n(n){for(var o=0;o<x.length;o++)if(t(e(n,x[o]),x[o]))return o;return-1}function o(t){var o=n(new i(t.pageX,t.pageY));if(-1!=o){o=x[o];var r=e(new i(t.pageX,t.pageY),o),s=t.type.replace("mouse","");("down"!=s&&"move"!=s||1&t.buttons||0==t.button)&&(o.mouse[s].x=r.x,o.mouse[s].y=r.y,"down"==s?(o.mouse.isDown=!0,o.mouse.isUp=!1):"up"==s&&(o.mouse.isDown=!1,o.mouse.isUp=!0))}}function a(e){for(var t=e.type.replace("touch",""),o=0;o<e.changedTouches.length;o++){var r;switch(t){case"start":r=new MouseEvent("mousedown",{screenX:e.changedTouches[o].screenX,screenY:e.changedTouches[o].screenY,clientX:e.changedTouches[o].clientX,clientY:e.changedTouches[o].clientY});break;case"move":r=new MouseEvent("mousemove",{screenX:e.changedTouches[o].screenX,screenY:e.changedTouches[o].screenY,clientX:e.changedTouches[o].clientX,clientY:e.changedTouches[o].clientY});break;case"cancel":case"end":r=new MouseEvent("mouseup",{screenX:e.changedTouches[o].screenX,screenY:e.changedTouches[o].screenY,clientX:e.changedTouches[o].clientX,clientY:e.changedTouches[o].clientY})}f.dispatchEvent(r)}if(e.touches.length>0){var s=n(new i(e.pageX,e.pageY));-1!=s&&(x[s].mouse.isDown=!0,x[s].mouse.isUp=!1)}1==e.touches.length&&"move"==t&&e.preventDefault()}function l(){if(0!=x.length){y&&(d.restore(),y=!1);for(var e=new i(0,0),t=0;t<x.length;t++){var n=x[t].settings;e.x=Math.max(e.x,n.offset.x+n.plotSize.x+n.labelBleed.x),e.y=Math.max(e.y,n.offset.y+n.plotSize.y+n.labelSize.y)}f.width=e.x+h.x+10,f.height=e.y+h.y+10,d.strokeStyle="#0000FF",d.lineWidth=2,d.strokeRect(0,0,f.width,f.height);for(var t=0;t<x.length;t++)c(x[t])}}function c(e){var t=e.settings;d.translate(t.offset.x,t.offset.y),d.clearRect(-t.labelSize.x,t.labelBleed.y,t.plotSize.x+t.labelSize.x+t.labelBleed.x,t.plotSize.y+t.labelSize.y-t.labelBleed.y),g&&(d.lineWidth=.5,d.strokeRect(-t.labelSize.x,t.labelBleed.y,t.plotSize.x+t.labelSize.x+t.labelBleed.x,t.plotSize.y+t.labelSize.y-t.labelBleed.y)),d.lineWidth=2,d.fillStyle="#F8F8F8",d.fillRect(0,0,t.plotSize.x,t.plotSize.y),d.fillStyle="#000000",d.strokeStyle="#E0E0E0",d.font="16px Helvetica",d.textAlign="center",d.textBaseline="top",d.beginPath();for(var n=0;n<=t.plotSize.x/t.gridSize.x;n++){var o=n*t.gridSize.x;if("c"!=t.orientation&&"d"!=t.orientation||(o=t.plotSize.x-o),t.drawGrid&&(d.moveTo(o,t.plotSize.y),d.lineTo(o,0)),!(n%t.labelFrequency.x)&&t.labelFrequency.x>0){var r=t.domain.x+n*t.unitPerTick.x;d.fillText(-1==t.labelPrecision.x?r:r.toFixed(t.labelPrecision.x),o,t.plotSize.y+5)}}d.textAlign="right",d.textBaseline="middle";for(var n=0;n<=t.plotSize.y/t.gridSize.y;n++){var s=n*t.gridSize.y;if("b"!=t.orientation&&"c"!=t.orientation&&(s=t.plotSize.y-s),t.drawGrid&&(d.moveTo(0,s),d.lineTo(t.plotSize.x,s)),!(n%t.labelFrequency.y)&&t.labelFrequency.y>0){var r=t.range.x+n*t.unitPerTick.y;d.fillText(-1==t.labelPrecision.y?r:r.toFixed(t.labelPrecision.y),-5,s)}}d.stroke(),d.strokeStyle="#000000",d.lineWidth=1,d.beginPath();var a=new i(t.zeroBoundAxis?Math.max(0,Math.min(t.plotSize.x,("c"==t.orientation||"d"==t.orientation?t.domain.y:-t.domain.x)*t.pixelPerUnit.x)):"c"==t.orientation||"d"==t.orientation?t.plotSize.x:0,t.zeroBoundAxis?Math.min(t.plotSize.y,Math.max(0,("b"==t.orientation||"c"==t.orientation?-t.range.x:t.range.y)*t.pixelPerUnit.y)):"b"==t.orientation||"c"==t.orientation?0:t.plotSize.y);if(d.moveTo(a.x,0),d.lineTo(a.x,t.plotSize.y),d.moveTo(0,a.y),d.lineTo(t.plotSize.x,a.y),d.stroke(),d.textAlign="center",d.textBaseline="bottom",d.font="24px Helvetica",d.fillText(t.xAxis,.5*t.plotSize.x,t.plotSize.y+t.labelSize.y),d.translate(-t.labelSize.x,.5*t.plotSize.y),d.rotate(3*Math.PI*.5),d.textBaseline="top",d.fillText(t.yAxis,0,0),d.rotate(-3*Math.PI*.5),d.translate(t.labelSize.x,-(.5*t.plotSize.y)),t.drawCoords){var l=Math.max(d.measureText(t.domain.x).width,d.measureText(t.domain.y).width),c=2*l+d.measureText("y: ").width;d.textAlign="left",d.textBaseline="bottom",d.fillText("x: "+(isNaN(Math.round(this.mouse.move.x))?0:Math.round(this.mouse.move.x)),t.plotSize.x-c-20,t.plotSize.y+t.labelSize.y),d.fillText("y: "+(isNaN(Math.round(this.mouse.move.y))?0:Math.round(this.mouse.move.y)),t.plotSize.x-l-10,t.plotSize.y+t.labelSize.y)}d.translate(-t.offset.x,-t.offset.y)}var f,d,u,x=[],p={},y=!1,g=!1,h="undefined"!=typeof arguments[1]?arguments[1]:new i(0,0);return f=arguments[0],d=f.getContext("2d"),f.addEventListener("mousedown",function(e){o(e)},!1),f.addEventListener("mousemove",function(e){o(e)},!1),f.addEventListener("mouseup",function(e){o(e)},!1),f.addEventListener("touchstart",function(e){a(e)},!1),f.addEventListener("touchmove",function(e){a(e)},!1),f.addEventListener("touchend",function(e){a(e)},!1),f.addEventListener("touchcancel",function(e){a(e)},!1),{set drawBorders(e){g=e},get drawBorders(){return g},newPlot:function(e,t){return plot=new r(e,d),x.push(plot),"undefined"!=typeof t&&(p[t]=x.length-1),l(),c(plot),x.length-1},clearPlot:function(e){e="undefined"!=typeof e?e:!1,void 0!=u&&(y&&e&&d.restore(),c(u),y&&(d.save(),d.rect(u.settings.offset.x+1,u.settings.offset.y,u.settings.plotSize.x-1,u.settings.plotSize.y-1),d.clip()))},editPlot:function(e,t,n,o){if(("number"!=typeof e||!(0>e||e>x.length-1))&&(e="number"==typeof e?x[e]:"string"==typeof e||e instanceof String||e.constructor==String||"[object String]"==Object.prototype.toString.call(e)?x[p[e]]:e,o="undefined"!=typeof o?o:!1,n="undefined"!=typeof n?n:!1,void 0!=e)){y&&d.restore(),o&&(d.clearRect(0,0,f.width,f.height),d.strokeStyle="#0000FF",d.lineWidth=2,d.strokeRect(0,0,f.width,f.height));for(var i in t)e.settings.hasOwnProperty(i)&&(e.settings[i]=t[i]);n&&e.reCalculateLabels(),c(e),y&&(d.save(),d.rect(u.settings.offset.x+1,u.settings.offset.y,u.settings.plotSize.x-1,u.settings.plotSize.y-1),d.clip())}},selectPlot:function(e,t,n){"number"==typeof e&&(0>e||e>x.length-1)||(t="undefined"!=typeof t?t:!0,n="undefined"!=typeof n?n:!0,e="number"==typeof e?x[e]:"string"==typeof e||e instanceof String||e.constructor==String||"[object String]"==Object.prototype.toString.call(e)?x[p[e]]:e,void 0!=e&&(y&&d.restore(),u=e,t&&c(u),n?(d.save(),d.rect(u.settings.offset.x+1,u.settings.offset.y,u.settings.plotSize.x-1,u.settings.plotSize.y-1),d.clip(),y=!0):y&&(y=!1)))},get ctx(){return d},get mouse(){return void 0!=u?u.mouse:void 0},get settings(){return void 0!=u?u.settings:void 0},pointOnPlot:function(e,n){return n="number"==typeof n&&n>=0&&n<=x.length-1?x[n]:"string"==typeof n||n instanceof String||"[object String]"==Object.prototype.toString.call(n)?x[p[n]]:n.hasOwnProperty("constructor")&&n.constructor==String?x[p[n]]:u,t(e,n)},plotToCanvas:function(e){var t=u.settings,n=(("c"==t.orientation||"d"==t.orientation?t.domain.y:2*e.x)-e.x-("c"==t.orientation||"d"==t.orientation?0:t.domain.x))*t.pixelPerUnit.x+t.offset.x,o=t.plotSize.y-(("b"==t.orientation||"c"==t.orientation?t.range.y:2*e.y)-e.y-("b"==t.orientation||"c"==t.orientation?0:t.range.x))*t.pixelPerUnit.y+t.offset.y;return new i(n,o)},plotPoint:function(e,t,n){void 0!=u&&(t="undefined"!=typeof t?t:2,n="undefined"!=typeof n?n:!0,e=this.plotToCanvas(e),d.beginPath(),d.arc(e.x,e.y,t,0,2*Math.PI),n?d.fill():d.stroke())},plotLine:function(e,t){void 0!=u&&(e=this.plotToCanvas(e),t=this.plotToCanvas(t),d.lineCap="round",d.beginPath(),d.moveTo(e.x,e.y),d.lineTo(t.x,t.y),d.stroke())},plotSlope:function(e,n){if(void 0!=u){var o=new i(u.settings.domain.x,e.y-n*(e.x-u.settings.domain.x));t(o,u)||(o.y=o.y<u.settings.range.x?u.settings.range.x:u.settings.range.y,o.x=e.x-(e.y-o.y)/n);var r=new i(u.settings.domain.y,e.y-n*(e.x-u.settings.domain.y));return t(r,u)||(r.y=r.y<u.settings.range.x?u.settings.range.x:u.settings.range.y,r.x=e.x-(e.y-r.y)/n),this.plotLine(o,r),new s(o,r,n,new i(e.x,e.y))}},plotPoly:function(e,t){var n=Object.keys(e).length;if(!(void 0==u||2>n)&&(t="undefined"!=typeof t?t:!1,"undefined"!=typeof e)){d.lineCap="round",d.beginPath();for(var o=0;n-1>o;o++){var i=this.plotToCanvas(e[o]);0!=o?d.lineTo(i.x,i.y):d.moveTo(i.x,i.y)}if(t){var i=this.plotToCanvas(e[0]);d.lineTo(i.x,i.y)}d.stroke()}},plotFunction:function(e,t,n,o,r){if(void 0!=u){t="undefined"!=typeof t?t:!0,n="undefined"!=typeof n?n:1,o="undefined"!=typeof o?o:t?u.settings.domain.x:u.settings.range.x,r="undefined"!=typeof r?r:t?u.settings.domain.y:u.settings.range.y;var s,a=o;for(d.lineCap="round",d.beginPath();r>a;){if(s=e(a),"undefined"!=typeof s){var l=new i(t?a:s,t?s:a);l=this.plotToCanvas(l),a!=o?d.lineTo(l.x,l.y):d.moveTo(l.x,l.y)}a+=n,a>r&&(a=r)}d.stroke()}},plotText:function(e,t){void 0!=u&&(t="undefined"!=typeof t?t:new i(u.settings.domain.x+.5*(u.settings.domain.y-u.settings.domain.x),u.settings.range.x+.5*(u.settings.range.y-u.settings.range.x)),t=this.plotToCanvas(t),d.fillText(e,t.x,t.y))},printPlotData:function(e,t){for(var n="",o=e.getPoints(),i=t?t:Object.keys(o[0]),r={},s=0;s<o.length;s++){if(r=o[s],0===s){for(var a=0;a<i.length;a++)a>0&&(n+=","),n+=i[a];n+="\n"}for(var a=0;a<i.length;a++)a>0&&(n+=","),n+=r[i[a]];n+="\n"}window.open("data:text/csv;charset=utf-8,"+encodeURIComponent(n))}}}var i=n(1),r=n(3),s=n(2);e.exports=o}])});
//# sourceMappingURL=plotter.min.js.map