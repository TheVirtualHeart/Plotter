!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Plotter=t():e.Plotter=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports.Point=n(1),e.exports.Line=n(2),e.exports.Plot=n(3),e.exports.Plotter=n(4)},function(e,t){function n(e,t){this.x=e,this.y=t}e.exports=n},function(e,t){function n(e,t,n,i){this.a=e,this.b=t,this.point=i,this.slope=n}e.exports=n},function(e,t,n){function i(){function e(){var e=0,t=0,i=p.settings;n.font="24px Helvetica";var o=n.measureText("M.").width;if(e+=0!=i.labelFrequency.y?Math.max(n.measureText(i.range.x).width,n.measureText(i.range.x+Math.floor(i.plotSize.y/i.gridSize.y)*i.unitPerTick.y).width):6,""!=i.yAxis&&(e+=o),t+=0!=i.labelFrequency.x?o:6,""!=i.xAxis&&(t+=o),""!=i.yAxis){n.font="24px Helvetica";var r=.5*n.measureText(i.yAxis).width-.5*i.plotSize.y;t=r>t?r:t}f.x=e,f.y=t}function t(){var e=p.settings,t=0,i=0!=e.labelFrequency.y?-8:0;if(n.font="16px Helvetica",0!=e.labelFrequency.x&&(t=Math.max(e.offset.x+Math.floor(e.plotSize.x/e.gridSize.x)*e.gridSize.x+.5*n.measureText(e.domain.x+Math.floor(e.plotSize.x/e.gridSize.x)*e.unitPerTick.x).width-(e.offset.x+e.plotSize.x),0)),n.font="24px Helvetica",""!=e.xAxis){var o=Math.max((e.domain.y-e.domain.x)*e.pixelPerUnit.x*.5+.5*n.measureText(e.xAxis).width-(e.domain.y-e.domain.x)*e.pixelPerUnit.x,0);t=t>o?t:o}if(""!=e.yAxis){var r=.5*e.plotSize.y-.5*n.measureText(e.yAxis).width;i=i>r?r:i}u.x=t,u.y=i}var n=arguments[1],i=arguments[0],r=new o(0,0),s=new o(-10,10),a=new o(-10,10),l=new o(0,0),x=new o(10,10),c=new o(1,1),y=new o(2,2),f=new o(0,0),u=new o(0,0),d=new o(-1,-1),p={settings:{set offset(e){r.x=e.x,r.y=e.y},get offset(){return new o(r.x+75,r.y+20)},set domain(e){s.x=e.x<e.y?e.x:e.y,s.y=e.x<e.y?e.y:e.x,l.x=this.pixelPerUnit.x*(this.domain.y-this.domain.x)},get domain(){return new o(s.x,s.y)},set range(e){a.x=e.x<e.y?e.x:e.y,a.y=e.x<e.y?e.y:e.x,l.y=this.pixelPerUnit.y*(this.range.y-this.range.x)},get range(){return new o(a.x,a.y)},set pixelPerUnit(e){x.x=0!=e.x?e.x:x.x,x.y=0!=e.y?e.y:x.y,l.x=this.pixelPerUnit.x*(this.domain.y-this.domain.x),l.y=this.pixelPerUnit.y*(this.range.y-this.range.x)},get pixelPerUnit(){return new o(x.x,x.y)},get plotSize(){return new o(l.x,l.y)},set unitPerTick(e){c.x=0!=e.x?e.x:c.x,c.y=0!=e.y?e.y:c.y},get unitPerTick(){return new o(c.x,c.y)},get gridSize(){return new o(this.unitPerTick.x*this.pixelPerUnit.x,this.unitPerTick.y*this.pixelPerUnit.y)},set labelFrequency(e){y.x=e.x>=0?e.x:0,y.y=e.y>=0?e.y:0},get labelFrequency(){return new o(y.x,y.y)},get labelSize(){return new o(f.x,f.y)},get labelBleed(){return new o(u.x,u.y)},set labelPrecision(e){d.x=e.x>=0?Math.min(20,Math.max(0,e.x)):-1,d.y=e.y>=0?Math.min(20,Math.max(0,e.y)):-1},get labelPrecision(){return new o(d.x,d.y)},xAxis:"xAxis",yAxis:"yAxis",zeroBoundAxis:!0,drawGrid:!0,drawCoords:!1,orientation:"a"},mouse:{down:new o,move:new o,up:new o,isDown:!1,isUp:!0},reCalculateLabels:function(){e(),t()}};for(var g in i)p.settings.hasOwnProperty(g)&&(p.settings[g]=i[g]);return l.x=p.settings.pixelPerUnit.x*(p.settings.domain.y-p.settings.domain.x),l.y=p.settings.pixelPerUnit.y*(p.settings.range.y-p.settings.range.x),e(),t(),p}var o=n(1);e.exports=i},function(e,t,n){function i(){function e(e,t){var n=t.settings,i=(e.x-c.offsetLeft-n.offset.x)/n.pixelPerUnit.x+n.domain.x,r=(c.height-(e.y-c.offsetTop)-(c.height-(n.offset.y+n.plotSize.y)))/n.pixelPerUnit.y+n.range.x;return new o(i,r)}function t(e,t){var n=t.settings;return e.x>=n.domain.x&&e.x<=n.domain.y&&e.y>=n.range.x&&e.y<=n.range.y}function n(n){for(var i=0;i<u.length;i++)if(t(e(n,u[i]),u[i]))return i;return-1}function i(t){var i=n(new o(t.pageX,t.pageY));if(-1!=i){i=u[i];var r=e(new o(t.pageX,t.pageY),i),s=t.type.replace("mouse","");("down"!=s&&"move"!=s||1&t.buttons||0==t.button)&&(i.mouse[s].x=r.x,i.mouse[s].y=r.y,"down"==s?(i.mouse.isDown=!0,i.mouse.isUp=!1):"up"==s&&(i.mouse.isDown=!1,i.mouse.isUp=!0))}}function a(e){for(var t=e.type.replace("touch",""),i=0;i<e.changedTouches.length;i++){var r;switch(t){case"start":r=new MouseEvent("mousedown",{screenX:e.changedTouches[i].screenX,screenY:e.changedTouches[i].screenY,clientX:e.changedTouches[i].clientX,clientY:e.changedTouches[i].clientY});break;case"move":r=new MouseEvent("mousemove",{screenX:e.changedTouches[i].screenX,screenY:e.changedTouches[i].screenY,clientX:e.changedTouches[i].clientX,clientY:e.changedTouches[i].clientY});break;case"cancel":case"end":r=new MouseEvent("mouseup",{screenX:e.changedTouches[i].screenX,screenY:e.changedTouches[i].screenY,clientX:e.changedTouches[i].clientX,clientY:e.changedTouches[i].clientY})}c.dispatchEvent(r)}if(e.touches.length>0){var s=n(new o(e.pageX,e.pageY));-1!=s&&(u[s].mouse.isDown=!0,u[s].mouse.isUp=!1)}1==e.touches.length&&"move"==t&&e.preventDefault()}function l(){if(0!=u.length){p&&(y.restore(),p=!1);for(var e=new o(0,0),t=0;t<u.length;t++){var n=u[t].settings;e.x=Math.max(e.x,n.offset.x+n.plotSize.x+n.labelBleed.x),e.y=Math.max(e.y,n.offset.y+n.plotSize.y+n.labelSize.y)}c.width=e.x+h.x+10,c.height=e.y+h.y+10,y.strokeStyle="#0000FF",y.lineWidth=2,y.strokeRect(0,0,c.width,c.height);for(var t=0;t<u.length;t++)x(u[t])}}function x(e){var t=e.settings;y.translate(t.offset.x,t.offset.y),y.clearRect(-t.labelSize.x,t.labelBleed.y,t.plotSize.x+t.labelSize.x+t.labelBleed.x,t.plotSize.y+t.labelSize.y-t.labelBleed.y),g&&(y.lineWidth=.5,y.strokeRect(-t.labelSize.x,t.labelBleed.y,t.plotSize.x+t.labelSize.x+t.labelBleed.x,t.plotSize.y+t.labelSize.y-t.labelBleed.y)),y.lineWidth=2,y.fillStyle="#F8F8F8",y.fillRect(0,0,t.plotSize.x,t.plotSize.y),y.fillStyle="#000000",y.strokeStyle="#E0E0E0",y.font="16px Helvetica",y.textAlign="center",y.textBaseline="top",y.beginPath();for(var n=0;n<=t.plotSize.x/t.gridSize.x;n++){var i=n*t.gridSize.x;if("c"!=t.orientation&&"d"!=t.orientation||(i=t.plotSize.x-i),t.drawGrid&&(y.moveTo(i,t.plotSize.y),y.lineTo(i,0)),!(n%t.labelFrequency.x)&&t.labelFrequency.x>0){var r=t.domain.x+n*t.unitPerTick.x;y.fillText(-1==t.labelPrecision.x?r:r.toFixed(t.labelPrecision.x),i,t.plotSize.y+5)}}y.textAlign="right",y.textBaseline="middle";for(var n=0;n<=t.plotSize.y/t.gridSize.y;n++){var s=n*t.gridSize.y;if("b"!=t.orientation&&"c"!=t.orientation&&(s=t.plotSize.y-s),t.drawGrid&&(y.moveTo(0,s),y.lineTo(t.plotSize.x,s)),!(n%t.labelFrequency.y)&&t.labelFrequency.y>0){var r=t.range.x+n*t.unitPerTick.y;y.fillText(-1==t.labelPrecision.y?r:r.toFixed(t.labelPrecision.y),-5,s)}}y.stroke(),y.strokeStyle="#000000",y.lineWidth=1,y.beginPath();var a=new o(t.zeroBoundAxis?Math.max(0,Math.min(t.plotSize.x,("c"==t.orientation||"d"==t.orientation?t.domain.y:-t.domain.x)*t.pixelPerUnit.x)):"c"==t.orientation||"d"==t.orientation?t.plotSize.x:0,t.zeroBoundAxis?Math.min(t.plotSize.y,Math.max(0,("b"==t.orientation||"c"==t.orientation?-t.range.x:t.range.y)*t.pixelPerUnit.y)):"b"==t.orientation||"c"==t.orientation?0:t.plotSize.y);if(y.moveTo(a.x,0),y.lineTo(a.x,t.plotSize.y),y.moveTo(0,a.y),y.lineTo(t.plotSize.x,a.y),y.stroke(),y.textAlign="center",y.textBaseline="bottom",y.font="24px Helvetica",y.fillText(t.xAxis,.5*t.plotSize.x,t.plotSize.y+t.labelSize.y),y.translate(-t.labelSize.x,.5*t.plotSize.y),y.rotate(3*Math.PI*.5),y.textBaseline="top",y.fillText(t.yAxis,0,0),y.rotate(-3*Math.PI*.5),y.translate(t.labelSize.x,-(.5*t.plotSize.y)),t.drawCoords){var l=Math.max(y.measureText(t.domain.x).width,y.measureText(t.domain.y).width),x=2*l+y.measureText("y: ").width;y.textAlign="left",y.textBaseline="bottom",y.fillText("x: "+(isNaN(Math.round(this.mouse.move.x))?0:Math.round(this.mouse.move.x)),t.plotSize.x-x-20,t.plotSize.y+t.labelSize.y),y.fillText("y: "+(isNaN(Math.round(this.mouse.move.y))?0:Math.round(this.mouse.move.y)),t.plotSize.x-l-10,t.plotSize.y+t.labelSize.y)}y.translate(-t.offset.x,-t.offset.y)}var c,y,f,u=[],d={},p=!1,g=!1,h="undefined"!=typeof arguments[1]?arguments[1]:new o(0,0);return c=arguments[0],y=c.getContext("2d"),c.addEventListener("mousedown",function(e){i(e)},!1),c.addEventListener("mousemove",function(e){i(e)},!1),c.addEventListener("mouseup",function(e){i(e)},!1),c.addEventListener("touchstart",function(e){a(e)},!1),c.addEventListener("touchmove",function(e){a(e)},!1),c.addEventListener("touchend",function(e){a(e)},!1),c.addEventListener("touchcancel",function(e){a(e)},!1),{set drawBorders(e){g=e},get drawBorders(){return g},newPlot:function(e,t){return plot=new r(e,y),u.push(plot),"undefined"!=typeof t&&(d[t]=u.length-1),l(),x(plot),u.length-1},clearPlot:function(e){e="undefined"!=typeof e?e:!1,void 0!=f&&(p&&e&&y.restore(),x(f),p&&(y.save(),y.rect(f.settings.offset.x+1,f.settings.offset.y,f.settings.plotSize.x-1,f.settings.plotSize.y-1),y.clip()))},editPlot:function(e,t,n,i){if(("number"!=typeof e||!(0>e||e>u.length-1))&&(e="number"==typeof e?u[e]:"string"==typeof e||e instanceof String||e.constructor==String||"[object String]"==Object.prototype.toString.call(e)?u[d[e]]:e,i="undefined"!=typeof i?i:!1,n="undefined"!=typeof n?n:!1,void 0!=e)){p&&y.restore(),i&&(y.clearRect(0,0,c.width,c.height),y.strokeStyle="#0000FF",y.lineWidth=2,y.strokeRect(0,0,c.width,c.height));for(var o in t)e.settings.hasOwnProperty(o)&&(e.settings[o]=t[o]);n&&e.reCalculateLabels(),x(e),p&&(y.save(),y.rect(f.settings.offset.x+1,f.settings.offset.y,f.settings.plotSize.x-1,f.settings.plotSize.y-1),y.clip())}},selectPlot:function(e,t,n){"number"==typeof e&&(0>e||e>u.length-1)||(t="undefined"!=typeof t?t:!0,n="undefined"!=typeof n?n:!0,e="number"==typeof e?u[e]:"string"==typeof e||e instanceof String||e.constructor==String||"[object String]"==Object.prototype.toString.call(e)?u[d[e]]:e,void 0!=e&&(p&&y.restore(),f=e,t&&x(f),n?(y.save(),y.rect(f.settings.offset.x+1,f.settings.offset.y,f.settings.plotSize.x-1,f.settings.plotSize.y-1),y.clip(),p=!0):p&&(p=!1)))},get ctx(){return y},get mouse(){return void 0!=f?f.mouse:void 0},get settings(){return void 0!=f?f.settings:void 0},pointOnPlot:function(e,n){return n="number"==typeof n&&n>=0&&n<=u.length-1?u[n]:"string"==typeof n||n instanceof String||"[object String]"==Object.prototype.toString.call(n)?u[d[n]]:n.hasOwnProperty("constructor")&&n.constructor==String?u[d[n]]:f,t(e,n)},plotToCanvas:function(e){var t=f.settings,n=(("c"==t.orientation||"d"==t.orientation?t.domain.y:2*e.x)-e.x-("c"==t.orientation||"d"==t.orientation?0:t.domain.x))*t.pixelPerUnit.x+t.offset.x,i=t.plotSize.y-(("b"==t.orientation||"c"==t.orientation?t.range.y:2*e.y)-e.y-("b"==t.orientation||"c"==t.orientation?0:t.range.x))*t.pixelPerUnit.y+t.offset.y;return new o(n,i)},plotPoint:function(e,t,n){void 0!=f&&(t="undefined"!=typeof t?t:2,n="undefined"!=typeof n?n:!0,e=this.plotToCanvas(e),y.beginPath(),y.arc(e.x,e.y,t,0,2*Math.PI),n?y.fill():y.stroke())},plotLine:function(e,t){void 0!=f&&(e=this.plotToCanvas(e),t=this.plotToCanvas(t),y.lineCap="round",y.beginPath(),y.moveTo(e.x,e.y),y.lineTo(t.x,t.y),y.stroke())},plotSlope:function(e,n){if(void 0!=f){var i=new o(f.settings.domain.x,e.y-n*(e.x-f.settings.domain.x));t(i,f)||(i.y=i.y<f.settings.range.x?f.settings.range.x:f.settings.range.y,i.x=e.x-(e.y-i.y)/n);var r=new o(f.settings.domain.y,e.y-n*(e.x-f.settings.domain.y));return t(r,f)||(r.y=r.y<f.settings.range.x?f.settings.range.x:f.settings.range.y,r.x=e.x-(e.y-r.y)/n),this.plotLine(i,r),new s(i,r,n,new o(e.x,e.y))}},plotPoly:function(e,t){var n=Object.keys(e).length;if(!(void 0==f||2>n)&&(t="undefined"!=typeof t?t:!1,"undefined"!=typeof e)){y.lineCap="round",y.beginPath();for(var i=0;n-1>i;i++){var o=this.plotToCanvas(e[i]);0!=i?y.lineTo(o.x,o.y):y.moveTo(o.x,o.y)}if(t){var o=this.plotToCanvas(e[0]);y.lineTo(o.x,o.y)}y.stroke()}},plotFunction:function(e,t,n,i,r){if(void 0!=f){t="undefined"!=typeof t?t:!0,n="undefined"!=typeof n?n:1,i="undefined"!=typeof i?i:t?f.settings.domain.x:f.settings.range.x,r="undefined"!=typeof r?r:t?f.settings.domain.y:f.settings.range.y;var s,a=i;for(y.lineCap="round",y.beginPath();r>a;){if(s=e(a),"undefined"!=typeof s){var l=new o(t?a:s,t?s:a);l=this.plotToCanvas(l),a!=i?y.lineTo(l.x,l.y):y.moveTo(l.x,l.y)}a+=n,a>r&&(a=r)}y.stroke()}},plotText:function(e,t){void 0!=f&&(t="undefined"!=typeof t?t:new o(f.settings.domain.x+.5*(f.settings.domain.y-f.settings.domain.x),f.settings.range.x+.5*(f.settings.range.y-f.settings.range.x)),t=this.plotToCanvas(t),y.fillText(e,t.x,t.y))},printPlotData:function(e,t){for(var n="",i=e.getPoints(),o=t?t:Object.keys(i[0]),r={},s=0;s<i.length;s++){if(r=i[s],0===s){for(var a=0;a<o.length;a++)a>0&&(n+=","),n+=o[a];n+="\n"}for(var a=0;a<o.length;a++)a>0&&(n+=","),n+=r[o[a]];n+="\n"}window.open("data:text/csv;charset=utf-8,"+encodeURIComponent(n))}}}var o=n(1),r=n(3),s=n(2);e.exports=i}])});
//# sourceMappingURL=plotter.min.js.map